[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Overview",
    "section": "",
    "text": "This interactive dashboard provides a comprehensive analysis of crime patterns across three major California cities: San Diego, Los Angeles, and San Francisco. The visualizations highlight monthly crime trends, top crime categories, geographic hotspots, and demographic characteristics of victims.\nBy combining multiple data sources and interactive analytics, this dashboard allows users to explore similarities and differences across cities, understand long-term crime behavior, and support data-driven decision making for policy planning, public safety, and resource allocation."
  },
  {
    "objectID": "index.html#about-this-dashboard",
    "href": "index.html#about-this-dashboard",
    "title": "Overview",
    "section": "",
    "text": "This interactive dashboard provides a comprehensive analysis of crime patterns across three major California cities: San Diego, Los Angeles, and San Francisco. The visualizations highlight monthly crime trends, top crime categories, geographic hotspots, and demographic characteristics of victims.\nBy combining multiple data sources and interactive analytics, this dashboard allows users to explore similarities and differences across cities, understand long-term crime behavior, and support data-driven decision making for policy planning, public safety, and resource allocation."
  },
  {
    "objectID": "index.html#mgta-452-project-slide",
    "href": "index.html#mgta-452-project-slide",
    "title": "Overview",
    "section": "MGTA 452 Project Slide",
    "text": "MGTA 452 Project Slide"
  },
  {
    "objectID": "index.html#data-schema",
    "href": "index.html#data-schema",
    "title": "Overview",
    "section": "Data Schema",
    "text": "Data Schema\nAll cities in the California Crime Dashboard are cleaned into a common schema. Each row represents a single reported incident.\n\n\n\n\nColumn\n\n\nType\n\n\nDescription\n\n\n\n\n\n\nincident_id\n\n\nString\n\n\nUnique identifier for each crime incident.\n\n\n\n\nincident_date\n\n\nDate\n\n\nCalendar date when the incident occurred (YYYY-MM-DD).\n\n\n\n\nincident_time\n\n\nTime\n\n\nTime of day when the incident occurred (HH:MM:SS).\n\n\n\n\nyear\n\n\nInteger\n\n\nYear of the incident (e.g., 2020‚Äì2025).\n\n\n\n\nmonth\n\n\nInteger\n\n\nMonth of the incident (1‚Äì12).\n\n\n\n\nday_of_week\n\n\nString\n\n\nDay of week when the incident occurred (e.g., Monday, Tuesday).\n\n\n\n\nhour\n\n\nInteger\n\n\nHour of day (0‚Äì23).\n\n\n\n\ntime_bin\n\n\nString\n\n\nBinned time of day (Late Night, Morning, Afternoon, Evening).\n\n\n\n\nseason\n\n\nString\n\n\nSeason of year (Winter, Spring, Summer, Fall).\n\n\n\n\ncrime_code\n\n\nString / Integer\n\n\nOriginal crime code from the city open-data portal.\n\n\n\n\ncrime_description\n\n\nString\n\n\nDescription of the offense (e.g., ‚ÄúBURGLARY FROM VEHICLE‚Äù).\n\n\n\n\ncrime_category\n\n\nString\n\n\nStandardized crime grouping (Property Crime, Violent Crime, etc.).\n\n\n\n\narea_name\n\n\nString\n\n\nNeighborhood / police division for the incident.\n\n\n\n\nzip_code\n\n\nString\n\n\nZIP code of the incident location.\n\n\n\n\nlatitude\n\n\nNumeric\n\n\nLatitude coordinate (may be rounded or masked).\n\n\n\n\nlongitude\n\n\nNumeric\n\n\nLongitude coordinate (may be rounded or masked).\n\n\n\n\nreport_status\n\n\nString\n\n\nStatus of the report (Open, Closed, Cleared, etc.).\n\n\n\n\nvictim_age\n\n\nInteger\n\n\nVictim age (if reported).\n\n\n\n\nvictim_sex\n\n\nString\n\n\nVictim gender (M, F, X, Unknown).\n\n\n\n\nvictim_descent\n\n\nString\n\n\nRace/ethnicity code from the agency."
  },
  {
    "objectID": "index.html#crime-hotspot-overview",
    "href": "index.html#crime-hotspot-overview",
    "title": "Overview",
    "section": "Crime Hotspot Overview",
    "text": "Crime Hotspot Overview\n\n\nCode\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nimport pandas as pd\nimport plotly.express as px\n\n# Load datasets\ndf_sd = pd.read_csv(\"data/san_diego_with_latlon.csv\")\ndf_la = pd.read_csv(\"data/los_angeles.csv\")\ndf_sf = pd.read_csv(\"data/san_francisco.csv\")\n\n# Function to prepare data for mapbox\ndef prepare_data(df, city_name, sample_n=3000):\n    df = df.copy()\n    df = df.dropna(subset=[\"latitude\", \"longitude\"])\n    if len(df) &gt; sample_n:\n        df = df.sample(sample_n, random_state=42)\n    df[\"city\"] = city_name\n    return df\n\nsd = prepare_data(df_sd, \"San Diego\")\nla = prepare_data(df_la, \"Los Angeles\")\nsf = prepare_data(df_sf, \"San Francisco\")\n\n# Combine three cities\ndf_all = pd.concat([sd, la, sf], ignore_index=True)\n\n# Mapbox scatter plot\nfig = px.scatter_mapbox(\n    df_all,\n    lat=\"latitude\",\n    lon=\"longitude\",\n    color=\"city\",\n    zoom=4.5,\n    height=650,\n    opacity=0.4,\n    hover_data=[\"crime_description\", \"zip_code\"],\n    title=\"Crime Hotspot Overview ‚Äî San Diego, Los Angeles, San Francisco\"\n)\n\nfig.update_layout(\n    mapbox_style=\"carto-positron\",  # Free, no API key needed\n    margin={\"r\":0,\"t\":50,\"l\":0,\"b\":0},\n    legend_title_text=\"City\"\n)\n\nfig"
  },
  {
    "objectID": "index.html#california-crime-overview-dashboard",
    "href": "index.html#california-crime-overview-dashboard",
    "title": "Overview",
    "section": "California Crime Overview Dashboard",
    "text": "California Crime Overview Dashboard\n\n\nCode\nimport pandas as pd\nimport plotly.express as px\nimport plotly.graph_objects as go\n\n# load data\ndf_sd = pd.read_csv(\"data/san_diego.csv\")\ndf_la = pd.read_csv(\"data/los_angeles.csv\")\ndf_sf = pd.read_csv(\"data/san_francisco.csv\")\n\n# date clean\ndef clean_city(df, city_name):\n    df = df.copy()\n    df[\"incident_date\"] = pd.to_datetime(df[\"incident_date\"], errors=\"coerce\")\n    df[\"year\"] = df[\"incident_date\"].dt.year\n    df[\"month\"] = df[\"incident_date\"].dt.month\n    df[\"month_name\"] = df[\"incident_date\"].dt.strftime(\"%b\")\n    df[\"city\"] = city_name\n    return df\n\ndf_sd = clean_city(df_sd, \"San Diego\")\ndf_la = clean_city(df_la, \"Los Angeles\")\ndf_sf = clean_city(df_sf, \"San Francisco\")\n\n# merge\ndf_all = pd.concat([df_sd, df_la, df_sf], ignore_index=True)\n\n# monthly crime counts\nmonthly_all = (\n    df_all.groupby([\"city\", \"year\", \"month\", \"month_name\"])\n          .size()\n          .reset_index(name=\"crime_count\")\n)\n\n# month order\nmonth_order = [\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]\n\n# default year\nyears = sorted(monthly_all[\"year\"].unique())\ntarget_years = [yr for yr in years if 2021 &lt;= yr &lt;= 2024]\ndefault_year = target_years[0]\n\ndf_year = monthly_all[monthly_all[\"year\"] == default_year]\n\n# build base figure\nfig = px.line(\n    df_year,\n    x=\"month_name\",\n    y=\"crime_count\",\n    color=\"city\",\n    markers=True,\n    title=f\"Monthly Crime Comparison ({default_year})\",\n    template=\"plotly_white\"\n)\n\n# dropdown: one button for each year\nyear_buttons = []\nfor yr in target_years:\n    df_temp = monthly_all[monthly_all[\"year\"] == yr]\n\n    year_buttons.append(\n        dict(\n            label=str(yr),\n            method=\"update\",\n            args=[\n                {\n                    \"x\": [\n                        df_temp[df_temp[\"city\"] == \"San Diego\"][\"month_name\"],\n                        df_temp[df_temp[\"city\"] == \"Los Angeles\"][\"month_name\"],\n                        df_temp[df_temp[\"city\"] == \"San Francisco\"][\"month_name\"],\n                    ],\n                    \"y\": [\n                        df_temp[df_temp[\"city\"] == \"San Diego\"][\"crime_count\"],\n                        df_temp[df_temp[\"city\"] == \"Los Angeles\"][\"crime_count\"],\n                        df_temp[df_temp[\"city\"] == \"San Francisco\"][\"crime_count\"],\n                    ],\n                },\n                {\n                    \"title\": f\"Monthly Crime Comparison ({yr})\"\n                }\n            ]\n        )\n    )\n\n# layout\nfig.update_layout(\n    updatemenus=[\n        dict(\n            buttons=year_buttons,\n            direction=\"down\",\n            x=1.15,\n            y=1.05,\n            showactive=True\n        )\n    ]\n)\n\nfig.update_xaxes(\n    categoryorder=\"array\",\n    categoryarray=month_order,\n    tickangle=-45\n)\n\nfig"
  },
  {
    "objectID": "index.html#crime-comparison-weekday",
    "href": "index.html#crime-comparison-weekday",
    "title": "Overview",
    "section": "Crime Comparison ‚Äî Weekday",
    "text": "Crime Comparison ‚Äî Weekday\n\n\nCode\nimport pandas as pd\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\n# ============================\n# Load data\n# ============================\n# Load each CSV and add city labels\ndataframes = []\n\n#SD\ndf_sd = pd.read_csv(\"data/san_diego.csv\")\ndf_sd[\"city\"] = \"San Diego\"\ndataframes.append(df_sd)\n#LA\ndf_la = pd.read_csv(\"data/los_angeles.csv\")\ndf_la[\"city\"] = \"Los Angeles\"\ndataframes.append(df_la)\n#SF\ndf_sf = pd.read_csv(\"data/san_francisco.csv\")\ndf_sf[\"city\"] = \"San Francisco\"\ndataframes.append(df_sf)\n\n\ndf = pd.concat(dataframes, ignore_index=True)\n\n# ============================\n# Prep weekday\n# ============================\n# Store original date column before parsing\ndf[\"incident_date_original\"] = df[\"incident_date\"].copy()\n\n# Try multiple date parsing strategies\ndf[\"incident_date\"] = pd.to_datetime(df[\"incident_date\"], errors=\"coerce\")\n\n# If that didn't work, try alternative formats on original values\nif df[\"incident_date\"].isna().any():\n\n    # For rows with NaT, try parsing with different format using original values\n    mask = df[\"incident_date\"].isna()\n\n    # Common alternative formats\n    for date_format in [\"%Y-%m-%d\", \"%m/%d/%Y %I:%M:%S %p\", \"%Y-%m-%d %H:%M:%S\", \"%m/%d/%Y\", \"%d/%m/%Y\"]:\n        if mask.sum() &gt; 0:\n            try:\n                df.loc[mask, \"incident_date\"] = pd.to_datetime(\n                    df.loc[mask, \"incident_date_original\"],\n                    format=date_format,\n                    errors=\"coerce\"\n                )\n                mask = df[\"incident_date\"].isna()\n            except Exception as e:\n                pass\n\n# Drop the temporary column\ndf.drop(\"incident_date_original\", axis=1, inplace=True)\n\ndf[\"weekday\"] = df[\"incident_date\"].dt.day_name()\n\nfor city in df['city'].unique():\n    city_df = df[df['city'] == city]\n    valid_dates = city_df['weekday'].notna().sum()\n\nweekday_order = [\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\",\"Sunday\"]\n\nweekday_counts = (\n    df.groupby([\"city\",\"weekday\"])\n      .size()\n      .reset_index(name=\"count\")\n)\n\nweekday_counts[\"weekday\"] = pd.Categorical(\n    weekday_counts[\"weekday\"],\n    categories=weekday_order,\n    ordered=True\n)\nweekday_counts = weekday_counts.sort_values(\"weekday\")\n\n# Remove any rows with NaN weekday (invalid dates)\nweekday_counts = weekday_counts[weekday_counts['weekday'].notna()]\n\nprint(f\"\\nAfter filtering NaN weekdays:\")\nprint(f\"Cities remaining: {weekday_counts['city'].unique().tolist()}\")\n\n# Pivot for easier access\npivot = weekday_counts.pivot(index=\"weekday\", columns=\"city\", values=\"count\")\n\nprint(f\"\\nPivot table columns (cities): {pivot.columns.tolist()}\")\n\n# Get actual cities present in the data\ncities = pivot.columns.tolist()\ncolors = [\"#2E86AB\", \"#A23B72\", \"#F18F01\"][:len(cities)]  # Modern color palette\n\n# Fill any missing weekdays with 0\npivot = pivot.reindex(weekday_order, fill_value=0)\n\n# Calculate statistics\ncity_stats = {}\nfor city in cities:\n    city_data = pivot[city]\n    city_stats[city] = {\n        \"avg\": city_data.mean(),\n        \"max\": city_data.max(),\n        \"min\": city_data.min(),\n        \"total\": city_data.sum()\n    }\n\n# ============================\n# Build figure with 3 traces (1 per city)\n# ============================\nfig = go.Figure()\n\nfor i, city in enumerate(cities):\n    avg_line = city_stats[city][\"avg\"]\n\n    # Add bar trace\n    fig.add_trace(go.Bar(\n        x=weekday_order,\n        y=pivot[city],\n        name=city,\n        marker_color=colors[i % len(colors)],\n        visible=(i == 0),  # First city visible by default\n        hovertemplate=(\n            \"&lt;b&gt;%{x}&lt;/b&gt;&lt;br&gt;\" +\n            \"Incidents: %{y:,}&lt;br&gt;\" +\n            f\"Average: {avg_line:,.0f}&lt;br&gt;\" +\n            \"&lt;extra&gt;&lt;/extra&gt;\"\n        )\n    ))\n\n    # Add average line\n    fig.add_trace(go.Scatter(\n        x=weekday_order,\n        y=[avg_line] * 7,\n        name=f\"{city} Average\",\n        mode=\"lines\",\n        line=dict(color=colors[i % len(colors)], dash=\"dash\", width=2),\n        visible=(i == 0),  # First city visible by default\n        hovertemplate=f\"Average: {avg_line:,.0f}&lt;extra&gt;&lt;/extra&gt;\"\n    ))\n\n# ============================\n# Dropdown menu\n# ============================\nbuttons = []\nfor i, city in enumerate(cities):\n    vis = [False] * (len(cities) * 2)  # 2 traces per city (bar + line)\n    vis[i * 2] = True      # Bar chart\n    vis[i * 2 + 1] = True  # Average line\n\n    stats = city_stats[city]\n    subtitle = f\"Total: {stats['total']:,} incidents | Avg: {stats['avg']:,.0f} per day | Range: {stats['min']:,}-{stats['max']:,}\"\n\n    buttons.append(\n        dict(\n            label=city,\n            method=\"update\",\n            args=[\n                {\"visible\": vis},\n                {\n                    \"title\": {\n                        \"text\": f\"&lt;b&gt;Weekly Crime Distribution ‚Äî {city}&lt;/b&gt;&lt;br&gt;&lt;sub&gt;{subtitle}&lt;/sub&gt;\",\n                        \"x\": 0.5,\n                        \"xanchor\": \"center\"\n                    }\n                }\n            ]\n        )\n    )\n\n\n# ============================\n# Layout customization\n# ============================\nfig.update_layout(\n    updatemenus=[\n        dict(\n            buttons=buttons,\n            direction=\"down\",\n            pad={\"r\": 10, \"t\": 10},\n            showactive=True,\n            x=0.02,\n            xanchor=\"left\",\n            y=1.15,\n            yanchor=\"top\",\n            bgcolor=\"rgba(255, 255, 255, 0.95)\",\n            bordercolor=\"#CCCCCC\",\n            borderwidth=1,\n            font=dict(size=12)\n        )\n    ],\n    title={\n        \"text\": f\"&lt;b&gt;Weekly Crime Distribution ‚Äî {cities[0]}&lt;/b&gt;&lt;br&gt;&lt;sub&gt;Total: {city_stats[cities[0]]['total']:,} incidents | Avg: {city_stats[cities[0]]['avg']:,.0f} per day | Range: {city_stats[cities[0]]['min']:,}-{city_stats[cities[0]]['max']:,}&lt;/sub&gt;\",\n        \"x\": 0.5,\n        \"xanchor\": \"center\",\n        \"font\": {\"size\": 20}\n    },\n    xaxis_title=\"&lt;b&gt;Weekday&lt;/b&gt;\",\n    yaxis_title=\"&lt;b&gt;Number of Incidents&lt;/b&gt;\",\n    hovermode=\"x unified\",\n    plot_bgcolor=\"rgba(240, 240, 240, 0.3)\",\n    paper_bgcolor=\"white\",\n    font=dict(family=\"Arial, sans-serif\", size=12),\n    showlegend=True,\n    legend=dict(\n        orientation=\"h\",\n        yanchor=\"bottom\",\n        y=-0.2,\n        xanchor=\"center\",\n        x=0.5\n    ),\n    margin=dict(t=120, b=80, l=80, r=40),\n    height=550\n)\n\n# Add grid\nfig.update_xaxes(showgrid=True, gridwidth=1, gridcolor='rgba(128, 128, 128, 0.2)')\nfig.update_yaxes(showgrid=True, gridwidth=1, gridcolor='rgba(128, 128, 128, 0.2)')\n\nfig.show()\n\n\n\nAfter filtering NaN weekdays:\nCities remaining: ['Los Angeles', 'San Francisco', 'San Diego']\n\nPivot table columns (cities): ['Los Angeles', 'San Diego', 'San Francisco']"
  },
  {
    "objectID": "index.html#crime-comparison-season",
    "href": "index.html#crime-comparison-season",
    "title": "Overview",
    "section": "Crime Comparison ‚Äî Season",
    "text": "Crime Comparison ‚Äî Season\n\n\nCode\nimport pandas as pd\nimport plotly.graph_objects as go\n\n# ============================\n# Load data\n# ============================\ndataframes = []\n\ntry:\n    df_sd = pd.read_csv(\"data/san_diego.csv\")\n    df_sd[\"city\"] = \"San Diego\"\n    dataframes.append(df_sd)\nexcept Exception as e:\n    print(f\"‚úó Could not load San Diego: {e}\")\n\ntry:\n    df_la = pd.read_csv(\"data/los_angeles.csv\")\n    df_la[\"city\"] = \"Los Angeles\"\n    dataframes.append(df_la)\nexcept Exception as e:\n    print(f\"‚úó Could not load Los Angeles: {e}\")\n\ntry:\n    df_sf = pd.read_csv(\"data/san_francisco.csv\")\n    df_sf[\"city\"] = \"San Francisco\"\n    dataframes.append(df_sf)\nexcept Exception as e:\n    print(f\"‚úó Could not load San Francisco: {e}\")\n\nif not dataframes:\n    raise ValueError(\"No data files could be loaded!\")\n\ndf = pd.concat(dataframes, ignore_index=True)\n\n# ============================\n# Prep season data\n# ============================\n# Check if season column exists, if not create it from dates\nif 'season' not in df.columns or df['season'].isna().all():\n    print(\"Creating season column from dates...\")\n    df[\"incident_date_original\"] = df[\"incident_date\"].copy()\n    df[\"incident_date\"] = pd.to_datetime(df[\"incident_date\"], errors=\"coerce\")\n\n    # Try alternative formats\n    if df[\"incident_date\"].isna().any():\n        mask = df[\"incident_date\"].isna()\n        for date_format in [\"%Y-%m-%d\", \"%m/%d/%Y %I:%M:%S %p\", \"%Y-%m-%d %H:%M:%S\", \"%m/%d/%Y\"]:\n            if mask.sum() &gt; 0:\n                try:\n                    df.loc[mask, \"incident_date\"] = pd.to_datetime(\n                        df.loc[mask, \"incident_date_original\"],\n                        format=date_format,\n                        errors=\"coerce\"\n                    )\n                    mask = df[\"incident_date\"].isna()\n                except:\n                    pass\n\n    # Create season from month\n    df['month'] = df['incident_date'].dt.month\n    df['season'] = df['month'].apply(lambda x:\n        'Winter' if x in [12, 1, 2] else\n        'Spring' if x in [3, 4, 5] else\n        'Summer' if x in [6, 7, 8] else\n        'Fall' if x in [9, 10, 11] else None\n    )\n\n# Define season order\nseason_order = [\"Winter\", \"Spring\", \"Summer\", \"Fall\"]\n\n# Group by city and season\nseason_counts = (\n    df.groupby([\"city\", \"season\"])\n      .size()\n      .reset_index(name=\"count\")\n)\n\n# Filter out null seasons\nseason_counts = season_counts[season_counts['season'].notna()]\n\n# Ensure all seasons are present for each city\nseason_counts[\"season\"] = pd.Categorical(\n    season_counts[\"season\"],\n    categories=season_order,\n    ordered=True\n)\nseason_counts = season_counts.sort_values(\"season\")\n\n# Pivot for easier access\npivot = season_counts.pivot(index=\"season\", columns=\"city\", values=\"count\")\npivot = pivot.reindex(season_order, fill_value=0)\n\n# Get actual cities present in the data\ncities = pivot.columns.tolist()\ncolors = [\"#2E86AB\", \"#A23B72\", \"#F18F01\"][:len(cities)]\n\n# Calculate statistics\ncity_stats = {}\nfor city in cities:\n    city_data = pivot[city]\n    city_stats[city] = {\n        \"avg\": city_data.mean(),\n        \"max\": city_data.max(),\n        \"min\": city_data.min(),\n        \"total\": city_data.sum()\n    }\n\n# ============================\n# Build figure\n# ============================\nfig = go.Figure()\n\nfor i, city in enumerate(cities):\n    avg_line = city_stats[city][\"avg\"]\n\n    # Add bar trace\n    fig.add_trace(go.Bar(\n        x=season_order,\n        y=pivot[city],\n        name=city,\n        marker_color=colors[i % len(colors)],\n        visible=(i == 0),\n        hovertemplate=(\n            \"&lt;b&gt;%{x}&lt;/b&gt;&lt;br&gt;\" +\n            \"Incidents: %{y:,}&lt;br&gt;\" +\n            f\"Average: {avg_line:,.0f}&lt;br&gt;\" +\n            \"&lt;extra&gt;&lt;/extra&gt;\"\n        )\n    ))\n\n    # Add average line\n    fig.add_trace(go.Scatter(\n        x=season_order,\n        y=[avg_line] * 4,\n        name=f\"{city} Average\",\n        mode=\"lines\",\n        line=dict(color=colors[i % len(colors)], dash=\"dash\", width=2),\n        visible=(i == 0),\n        hovertemplate=f\"Average: {avg_line:,.0f}&lt;extra&gt;&lt;/extra&gt;\"\n    ))\n\n# ============================\n# Dropdown menu\n# ============================\nbuttons = []\nfor i, city in enumerate(cities):\n    vis = [False] * (len(cities) * 2)\n    vis[i * 2] = True      # Bar chart\n    vis[i * 2 + 1] = True  # Average line\n\n    stats = city_stats[city]\n    subtitle = f\"Total: {stats['total']:,} incidents | Avg: {stats['avg']:,.0f} per season | Range: {stats['min']:,}-{stats['max']:,}\"\n\n    buttons.append(\n        dict(\n            label=city,\n            method=\"update\",\n            args=[\n                {\"visible\": vis},\n                {\n                    \"title\": {\n                        \"text\": f\"&lt;b&gt;Seasonal Crime Distribution ‚Äî {city}&lt;/b&gt;&lt;br&gt;&lt;sub&gt;{subtitle}&lt;/sub&gt;\",\n                        \"x\": 0.5,\n                        \"xanchor\": \"center\"\n                    }\n                }\n            ]\n        )\n    )\n\n# ============================\n# Layout customization\n# ============================\nfig.update_layout(\n    updatemenus=[\n        dict(\n            buttons=buttons,\n            direction=\"down\",\n            pad={\"r\": 10, \"t\": 10},\n            showactive=True,\n            x=0.02,\n            xanchor=\"left\",\n            y=1.15,\n            yanchor=\"top\",\n            bgcolor=\"rgba(255, 255, 255, 0.95)\",\n            bordercolor=\"#CCCCCC\",\n            borderwidth=1,\n            font=dict(size=12)\n        )\n    ],\n    title={\n        \"text\": f\"&lt;b&gt;Seasonal Crime Distribution ‚Äî {cities[0]}&lt;/b&gt;&lt;br&gt;&lt;sub&gt;Total: {city_stats[cities[0]]['total']:,} incidents | Avg: {city_stats[cities[0]]['avg']:,.0f} per season | Range: {city_stats[cities[0]]['min']:,}-{city_stats[cities[0]]['max']:,}&lt;/sub&gt;\",\n        \"x\": 0.5,\n        \"xanchor\": \"center\",\n        \"font\": {\"size\": 20}\n    },\n    xaxis_title=\"&lt;b&gt;Season&lt;/b&gt;\",\n    yaxis_title=\"&lt;b&gt;Number of Incidents&lt;/b&gt;\",\n    hovermode=\"x unified\",\n    plot_bgcolor=\"rgba(240, 240, 240, 0.3)\",\n    paper_bgcolor=\"white\",\n    font=dict(family=\"Arial, sans-serif\", size=12),\n    showlegend=True,\n    legend=dict(\n        orientation=\"h\",\n        yanchor=\"bottom\",\n        y=-0.2,\n        xanchor=\"center\",\n        x=0.5\n    ),\n    margin=dict(t=120, b=80, l=80, r=40),\n    height=550\n)\n\n# Add grid\nfig.update_xaxes(showgrid=True, gridwidth=1, gridcolor='rgba(128, 128, 128, 0.2)')\nfig.update_yaxes(showgrid=True, gridwidth=1, gridcolor='rgba(128, 128, 128, 0.2)')\n\nfig.show()"
  },
  {
    "objectID": "index.html#top-5-crimes-comparison-san-diego-vs-los-angeles-vs-san-francisco",
    "href": "index.html#top-5-crimes-comparison-san-diego-vs-los-angeles-vs-san-francisco",
    "title": "Overview",
    "section": "Top 5 Crimes Comparison ‚Äî San Diego vs Los Angeles vs San Francisco",
    "text": "Top 5 Crimes Comparison ‚Äî San Diego vs Los Angeles vs San Francisco\n\n\nCode\nimport pandas as pd\nimport plotly.graph_objects as go\n\n# ============================\n# Load datasets\n# ============================\nprint(\"Loading data...\")\ndf_sd = pd.read_csv(\"data/san_diego.csv\")\ndf_la = pd.read_csv(\"data/los_angeles.csv\")\ndf_sf = pd.read_csv(\"data/san_francisco.csv\")\n\ndf_sd[\"city\"] = \"San Diego\"\ndf_la[\"city\"] = \"Los Angeles\"\ndf_sf[\"city\"] = \"San Francisco\"\n\nprint(f\"‚úì San Diego: {len(df_sd):,} crimes\")\nprint(f\"‚úì Los Angeles: {len(df_la):,} crimes\")\nprint(f\"‚úì San Francisco: {len(df_sf):,} crimes\")\n\n# ============================\n# Get top 5 crimes for each city\n# ============================\ndef get_top_crimes(df, n=5):\n    return df[\"crime_description\"].value_counts().head(n)\n\nsd_top5 = get_top_crimes(df_sd, 5)\nla_top5 = get_top_crimes(df_la, 5)\nsf_top5 = get_top_crimes(df_sf, 5)\n\n# Get all unique top crimes across cities\nall_top_crimes = set(sd_top5.index) | set(la_top5.index) | set(sf_top5.index)\n\n# Create a summary dataframe for grouped comparison\ncities_data = {\n    \"San Diego\": df_sd,\n    \"Los Angeles\": df_la,\n    \"San Francisco\": df_sf\n}\n\n# Calculate crime counts for comparison view\ncomparison_data = []\nfor crime in all_top_crimes:\n    for city, df in cities_data.items():\n        count = len(df[df[\"crime_description\"] == crime])\n        if count &gt; 0:\n            comparison_data.append({\n                \"city\": city,\n                \"crime\": crime,\n                \"count\": count\n            })\n\ndf_comparison = pd.DataFrame(comparison_data)\n\n# ============================\n# Prepare individual city data\n# ============================\ncities = [\"San Diego\", \"Los Angeles\", \"San Francisco\"]\ncolors = [\"#2E86AB\", \"#A23B72\", \"#F18F01\"]\n\ncity_top5_data = {\n    \"San Diego\": sd_top5,\n    \"Los Angeles\": la_top5,\n    \"San Francisco\": sf_top5\n}\n\n# ============================\n# Create figure\n# ============================\nfig = go.Figure()\n\n# Add traces for \"All Cities Comparison\" view (grouped bars)\nfor i, city in enumerate(cities):\n    city_df = df_comparison[df_comparison[\"city\"] == city].sort_values(\"count\", ascending=False)\n\n    fig.add_trace(go.Bar(\n        x=city_df[\"crime\"],\n        y=city_df[\"count\"],\n        name=city,\n        marker_color=colors[i],\n        visible=True,  # Comparison view visible by default\n        hovertemplate=\"&lt;b&gt;%{x}&lt;/b&gt;&lt;br&gt;\" + f\"{city}&lt;br&gt;\" + \"Count: %{y:,}&lt;extra&gt;&lt;/extra&gt;\"\n    ))\n\n# Add traces for individual city views\nfor i, city in enumerate(cities):\n    top5 = city_top5_data[city]\n\n    fig.add_trace(go.Bar(\n        x=top5.index,\n        y=top5.values,\n        name=city,\n        marker_color=colors[i],\n        visible=False,  # Individual views hidden by default\n        hovertemplate=\"&lt;b&gt;%{x}&lt;/b&gt;&lt;br&gt;Count: %{y:,}&lt;br&gt;Percentage: %{customdata:.1f}%&lt;extra&gt;&lt;/extra&gt;\",\n        customdata=[val/top5.sum()*100 for val in top5.values]\n    ))\n\n# ============================\n# Create dropdown menu\n# ============================\nbuttons = []\n\n# Button for \"All Cities Comparison\"\nbuttons.append(\n    dict(\n        label=\"All Cities Comparison\",\n        method=\"update\",\n        args=[\n            {\"visible\": [True, True, True, False, False, False]},\n            {\n                \"title\": {\n                    \"text\": \"&lt;b&gt;Top 5 Crimes Comparison ‚Äî All Cities&lt;/b&gt;&lt;br&gt;&lt;sub&gt;Grouped comparison across San Diego, Los Angeles, and San Francisco&lt;/sub&gt;\",\n                    \"x\": 0.5,\n                    \"xanchor\": \"center\"\n                },\n                \"showlegend\": True,\n                \"xaxis\": {\"title\": \"&lt;b&gt;Crime Type&lt;/b&gt;\", \"tickangle\": -45},\n                \"yaxis\": {\"title\": \"&lt;b&gt;Number of Incidents&lt;/b&gt;\"},\n                \"barmode\": \"group\"\n            }\n        ]\n    )\n)\n\n# Buttons for individual cities\nfor i, city in enumerate(cities):\n    vis = [False] * 6\n    vis[3 + i] = True  # Show only the corresponding individual city trace\n\n    total = city_top5_data[city].sum()\n    top_crime = city_top5_data[city].index[0]\n    top_count = city_top5_data[city].values[0]\n\n    buttons.append(\n        dict(\n            label=city,\n            method=\"update\",\n            args=[\n                {\"visible\": vis},\n                {\n                    \"title\": {\n                        \"text\": f\"&lt;b&gt;Top 5 Crimes ‚Äî {city}&lt;/b&gt;&lt;br&gt;&lt;sub&gt;Most common: {top_crime} ({top_count:,} incidents, {top_count/total*100:.1f}%)&lt;/sub&gt;\",\n                        \"x\": 0.5,\n                        \"xanchor\": \"center\"\n                    },\n                    \"showlegend\": False,\n                    \"xaxis\": {\"title\": \"&lt;b&gt;Crime Type&lt;/b&gt;\", \"tickangle\": -45},\n                    \"yaxis\": {\"title\": \"&lt;b&gt;Number of Incidents&lt;/b&gt;\"},\n                    \"barmode\": \"relative\"\n                }\n            ]\n        )\n    )\n\n# ============================\n# Update layout\n# ============================\nfig.update_layout(\n    updatemenus=[\n        dict(\n            buttons=buttons,\n            direction=\"down\",\n            pad={\"r\": 10, \"t\": 10},\n            showactive=True,\n            x=0.02,\n            xanchor=\"left\",\n            y=1.15,\n            yanchor=\"top\",\n            bgcolor=\"rgba(255, 255, 255, 0.95)\",\n            bordercolor=\"#CCCCCC\",\n            borderwidth=1,\n            font=dict(size=12)\n        )\n    ],\n    title={\n        \"text\": \"&lt;b&gt;Top 5 Crimes Comparison ‚Äî All Cities&lt;/b&gt;&lt;br&gt;&lt;sub&gt;Grouped comparison across San Diego, Los Angeles, and San Francisco&lt;/sub&gt;\",\n        \"x\": 0.5,\n        \"xanchor\": \"center\",\n        \"font\": {\"size\": 20}\n    },\n    xaxis_title=\"&lt;b&gt;Crime Type&lt;/b&gt;\",\n    yaxis_title=\"&lt;b&gt;Number of Incidents&lt;/b&gt;\",\n    xaxis_tickangle=-45,\n    plot_bgcolor=\"rgba(240, 240, 240, 0.3)\",\n    paper_bgcolor=\"white\",\n    font=dict(family=\"Arial, sans-serif\", size=12),\n    showlegend=True,\n    legend=dict(\n        orientation=\"h\",\n        yanchor=\"bottom\",\n        y=-0.4,\n        xanchor=\"center\",\n        x=0.5\n    ),\n    margin=dict(t=120, b=120, l=80, r=40),\n    height=600,\n    barmode=\"group\",\n    hovermode=\"closest\"\n)\n\n# Add grid\nfig.update_xaxes(showgrid=True, gridwidth=1, gridcolor='rgba(128, 128, 128, 0.2)')\nfig.update_yaxes(showgrid=True, gridwidth=1, gridcolor='rgba(128, 128, 128, 0.2)')\n\nfig.show()\n\n\nLoading data...\n‚úì San Diego: 680,263 crimes\n‚úì Los Angeles: 1,004,991 crimes\n‚úì San Francisco: 692,095 crimes"
  },
  {
    "objectID": "la.html",
    "href": "la.html",
    "title": "Los Angeles Crime Dashboard",
    "section": "",
    "text": "This page analyzes crime patterns in Los Angeles by looking at trends over time, the most common crime types, crime hotspots by ZIP code, and victim age characteristics. These visualizations help identify when crimes peak, which offenses are most frequent, and how different groups of victims are affected."
  },
  {
    "objectID": "la.html#summary",
    "href": "la.html#summary",
    "title": "Los Angeles Crime Dashboard",
    "section": "",
    "text": "This page analyzes crime patterns in Los Angeles by looking at trends over time, the most common crime types, crime hotspots by ZIP code, and victim age characteristics. These visualizations help identify when crimes peak, which offenses are most frequent, and how different groups of victims are affected."
  },
  {
    "objectID": "la.html#la-crime-map-basic-marker-map",
    "href": "la.html#la-crime-map-basic-marker-map",
    "title": "Los Angeles Crime Dashboard",
    "section": "LA Crime Map (Basic Marker Map)",
    "text": "LA Crime Map (Basic Marker Map)\n\n\nCode\nimport folium\nfrom folium.plugins import MarkerCluster\nimport pandas as pd\n\ndf = pd.read_csv(\"data/los_angeles.csv\")\n\nla_map = folium.Map(location=[34.0522, -118.2437], zoom_start=10)\nmarker_cluster = MarkerCluster().add_to(la_map)\n\ndf_sample = df.sample(n=5000, random_state=42)\n\nfor _, row in df_sample.iterrows():\n    folium.CircleMarker(\n        location=[row[\"latitude\"], row[\"longitude\"]],\n        radius=3,\n        color=\"red\",\n        fill=True,\n        fill_opacity=0.6\n    ).add_to(marker_cluster)\n\nla_map\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook"
  },
  {
    "objectID": "la.html#prepare-data",
    "href": "la.html#prepare-data",
    "title": "Los Angeles Crime Dashboard",
    "section": "Prepare Data",
    "text": "Prepare Data\n\n\nCode\nimport pandas as pd\n\ndf = pd.read_csv(\"data/los_angeles.csv\")\n\ndf[\"incident_date\"] = pd.to_datetime(df[\"incident_date\"], errors=\"coerce\")\ndf[\"year\"] = df[\"incident_date\"].dt.year\ndf[\"month\"] = df[\"incident_date\"].dt.month\ndf[\"month_name\"] = df[\"incident_date\"].dt.strftime(\"%b\")\n\ndf = df.dropna(subset=[\"year\", \"month\"])\n\nmonthly_total = (\n    df.groupby([\"year\", \"month\", \"month_name\"])\n    .size()\n    .reset_index(name=\"crime_count\")\n)"
  },
  {
    "objectID": "la.html#top-crime-types-over-time-top-5",
    "href": "la.html#top-crime-types-over-time-top-5",
    "title": "Los Angeles Crime Dashboard",
    "section": "Top Crime Types Over Time (Top 5)",
    "text": "Top Crime Types Over Time (Top 5)\n\n\nCode\nmonthly_by_cat = (\n    df.groupby([\"year\", \"month\", \"month_name\", \"crime_description\"])\n    .size()\n    .reset_index(name=\"crime_count\")\n)\n\ntop_categories = df[\"crime_description\"].value_counts().head(5).index\nmonthly_by_cat = monthly_by_cat[monthly_by_cat[\"crime_description\"].isin(top_categories)]\n\n\n\n\nCode\nimport plotly.express as px\nimport plotly.graph_objects as go\n\n# --- Step 1: Keep only top 5 categories ---\ntop_categories = (\n    df[\"crime_description\"]\n      .value_counts()\n      .head(5)\n      .index\n)\n\nfiltered = monthly_by_cat[\n    monthly_by_cat[\"crime_description\"].isin(top_categories)\n].copy()\n\n# --- Step 2: available years ---\nyears = sorted(filtered[\"year\"].unique())\ndefault_year = years[0]\n\n# --- Step 3: filter initial dataset ---\ndf_year = filtered[filtered[\"year\"] == default_year]\n\n# --- Step 4: build initial plot ---\nfig = px.line(\n    df_year,\n    x=\"month_name\",\n    y=\"crime_count\",\n    color=\"crime_description\",\n    markers=True,\n    title=f\"Monthly Crime Trends by Category ({default_year})\",\n    template=\"plotly_white\"\n)\n\n# --- Step 5: Year Dropdown ---\nyear_buttons = []\n\nfor yr in years:\n    df_temp = filtered[filtered[\"year\"] == yr]\n\n    # Build x/y arrays for each category in correct order\n    x_list = [\n        df_temp[df_temp[\"crime_description\"] == cat][\"month_name\"]\n        for cat in top_categories\n    ]\n    y_list = [\n        df_temp[df_temp[\"crime_description\"] == cat][\"crime_count\"]\n        for cat in top_categories\n    ]\n\n    year_buttons.append(\n        dict(\n            label=str(yr),\n            method=\"update\",\n            args=[\n                {\n                    \"x\": x_list,\n                    \"y\": y_list,\n                },\n                {\n                    \"title\": f\"Monthly Crime Trends by Category ({yr})\"\n                }\n            ]\n        )\n    )\n\nfig.update_layout(\n    updatemenus=[\n        dict(\n            buttons=year_buttons,\n            direction=\"down\",\n            x=1.15,\n            y=1.05,\n            showactive=True\n        )\n    ]\n)\n\n# --- Step 6: Month Ordering ---\nfig.update_xaxes(\n    categoryorder=\"array\",\n    categoryarray=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]\n)\n\nfig"
  },
  {
    "objectID": "la.html#crime-hotspots-top-zip-codes",
    "href": "la.html#crime-hotspots-top-zip-codes",
    "title": "Los Angeles Crime Dashboard",
    "section": "Crime Hotspots ‚Äî Top ZIP Codes",
    "text": "Crime Hotspots ‚Äî Top ZIP Codes\n\n\nCode\ndf[\"zip_code\"] = df[\"zip_code\"].astype(str).str.replace(\".0\", \"\", regex=False)\n\nzip_counts = (\n    df.groupby(\"zip_code\")\n      .size()\n      .reset_index(name=\"crime_count\")\n      .sort_values(\"crime_count\", ascending=False)\n)\n\ntop_zip = zip_counts.head(10)\n\nimport plotly.express as px\n\nfig = px.bar(\n    top_zip.sort_values(\"crime_count\"),\n    x=\"crime_count\",\n    y=\"zip_code\",\n    orientation=\"h\",\n    title=\"Top 10 ZIP Codes by Total Crime\",\n    labels={\"zip_code\": \"ZIP Code\", \"crime_count\": \"Total Crimes\"},\n    template=\"plotly_white\"\n)\n\nfig"
  },
  {
    "objectID": "la.html#victim-age-distribution",
    "href": "la.html#victim-age-distribution",
    "title": "Los Angeles Crime Dashboard",
    "section": "Victim Age Distribution",
    "text": "Victim Age Distribution\n\n\nCode\nimport plotly.express as px\n\n# 1. Clean age data\ndf_age_clean = df[(df[\"victim_age\"] &gt;= 0) & (df[\"victim_age\"] &lt;= 120)]\n\n# 2. Select TOP 5 crime categories\ntop5_age = (\n    df_age_clean[\"crime_description\"]\n      .value_counts()\n      .head(5)\n      .index\n)\n\ndf_top5 = df_age_clean[df_age_clean[\"crime_description\"].isin(top5_age)]\n\n# 3. Build a clean histogram\nfig = px.histogram(\n    df_top5,\n    x=\"victim_age\",\n    color=\"crime_description\",\n    nbins=40,\n    barmode=\"overlay\",\n    opacity=0.6,\n    title=\"Victim Age Distribution (Top 5 Crime Categories)\",\n    template=\"plotly_white\"\n)\n\nfig.update_layout(\n    legend_title_text=\"Crime Category\",\n    bargap=0.05\n)\n\nfig"
  },
  {
    "objectID": "la.html#victim-age-groups",
    "href": "la.html#victim-age-groups",
    "title": "Los Angeles Crime Dashboard",
    "section": "Victim Age Groups",
    "text": "Victim Age Groups\n\n\nCode\nimport pandas as pd\nimport plotly.express as px\n\n# --- Clean age data ---\ndf_age_clean = df[(df[\"victim_age\"] &gt;= 0) & (df[\"victim_age\"] &lt;= 120)].copy()\n\ndf_age_clean.loc[:, \"age_group\"] = pd.cut(\n    df_age_clean[\"victim_age\"],\n    bins=[0, 18, 30, 45, 60, 120],\n    labels=[\"0‚Äì18\", \"19‚Äì30\", \"31‚Äì45\", \"46‚Äì60\", \"60+\"]\n)\n\n# --- Step 1: Select Top 10 crimes by total count ---\ntop10_crimes = (\n    df_age_clean[\"crime_description\"]\n      .value_counts()\n      .head(10)\n      .index\n)\n\ndf_top10 = df_age_clean[df_age_clean[\"crime_description\"].isin(top10_crimes)]\n\n# --- Step 2: Group for plotting ---\nage_group_df = (\n    df_top10\n        .dropna(subset=[\"age_group\"])\n        .groupby([\"crime_description\", \"age_group\"], observed=True)\n        .size()\n        .reset_index(name=\"count\")\n)\n\n# --- Step 3: Plot ---\nfig = px.bar(\n    age_group_df,\n    x=\"crime_description\",\n    y=\"count\",\n    color=\"age_group\",\n    barmode=\"stack\",\n    title=\"Victim Age Groups (Top 10 Crimes)\",\n    template=\"plotly_white\"\n)\n\n# Make x labels readable\nfig.update_layout(\n    xaxis_tickangle=-45,\n    legend_title_text=\"Age Group\"\n)\n\nfig"
  },
  {
    "objectID": "sf.html",
    "href": "sf.html",
    "title": "San Francisco Crime Dashboard",
    "section": "",
    "text": "Code\nimport pandas as pd\nimport folium\nfrom folium.plugins import MarkerCluster\nimport warnings\nwarnings.filterwarnings(\"ignore\", category=pd.errors.DtypeWarning)\n\ndf = pd.read_csv(\"data/san_francisco.csv\",low_memory=False)\n\n# remove lat/lon\ndf = df.dropna(subset=[\"latitude\", \"longitude\"])\n\n# build map\nsf_map = folium.Map(location=[37.7749, -122.4194], zoom_start=12)\nmarker_cluster = MarkerCluster().add_to(sf_map)\n\n# sample\ndf_sample = df.sample(n=5000, random_state=42)\n\n# add mark\nfor _, row in df_sample.iterrows():\n    folium.CircleMarker(\n        location=[row[\"latitude\"], row[\"longitude\"]],\n        radius=3,\n        color=\"green\",\n        fill=True,\n        fill_opacity=0.6\n    ).add_to(marker_cluster)\n\nsf_map\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook\nCode\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\n# Load data\ndf = pd.read_csv(\"data/san_francisco.csv\")\n\n# Convert incident_date to datetime\ndf[\"incident_date\"] = pd.to_datetime(df[\"incident_date\"], errors=\"coerce\")\n\n# Rebuild year, month, month_name\ndf[\"year\"] = df[\"incident_date\"].dt.year\ndf[\"month\"] = df[\"incident_date\"].dt.month\ndf[\"month_name\"] = df[\"incident_date\"].dt.strftime(\"%b\")\n\n# Drop rows missing year or month\ndf = df.dropna(subset=[\"year\", \"month\"])\n\n# Monthly crime totals\nmonthly_total = (\n    df.groupby([\"year\", \"month\", \"month_name\"])\n    .size()\n    .reset_index(name=\"crime_count\")\n)"
  },
  {
    "objectID": "sf.html#crime-trends-over-time",
    "href": "sf.html#crime-trends-over-time",
    "title": "San Francisco Crime Dashboard",
    "section": "Crime Trends Over Time",
    "text": "Crime Trends Over Time\n\n\nCode\nimport plotly.express as px\n\n# Get sorted list of years for the dropdown\nyears = sorted(df[\"year\"].unique())\n\n# Create line chart\nfig = px.line(\n    monthly_total,\n    x=\"month_name\",\n    y=\"crime_count\",\n    color=\"year\",\n    markers=True,\n    title=\"Monthly Crime Totals by Year\",\n    template=\"plotly_white\"\n)\n\n# Dropdown buttons\nbuttons = []\n\n# Button: All Years\nbuttons.append(\n    dict(\n        label=\"All Years\",\n        method=\"update\",\n        args=[{\"visible\": [True] * len(years)}]\n    )\n)\n\n# Buttons: One per year\nfor i, yr in enumerate(years):\n    visibility = [False] * len(years)\n    visibility[i] = True\n    buttons.append(\n        dict(\n            label=str(yr),\n            method=\"update\",\n            args=[{\"visible\": visibility}]\n        )\n    )\n\n# Add dropdown menu\nfig.update_layout(\n    updatemenus=[\n        dict(\n            buttons=buttons,\n            direction=\"down\",\n            x=1.15,\n            y=1.0\n        )\n    ]\n)\n\n# Order months correctly on x-axis\nfig.update_xaxes(\n    categoryorder=\"array\",\n    categoryarray=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\n                   \"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]\n)\n\nfig"
  },
  {
    "objectID": "sf.html#finding-the-top-10-neighborhoods-by-total-crimes",
    "href": "sf.html#finding-the-top-10-neighborhoods-by-total-crimes",
    "title": "San Francisco Crime Dashboard",
    "section": "FINDING THE TOP 10 NEIGHBORHOODS BY TOTAL CRIMES",
    "text": "FINDING THE TOP 10 NEIGHBORHOODS BY TOTAL CRIMES\n\n\nCode\nimport plotly.express as px\nimport pandas as pd\n\ndf = pd.read_csv(\"data/san_francisco.csv\",low_memory=False)\n\ntop_neighborhoods = df[\"area_name\"].value_counts().head(10)\n\nfig = px.bar(\n    x=top_neighborhoods.index,\n    y=top_neighborhoods.values,\n    labels={\"x\": \"Neighborhood\", \"y\": \"Incidents\"},\n    title=\"Top 10 Neighborhoods by Number of Crimes ‚Äì San Francisco\",\n    text=top_neighborhoods.values\n)\n\nfig.update_traces(marker_color=\"tomato\", textposition=\"outside\")\nfig.update_layout(\n    xaxis_tickangle=35,\n    template=\"simple_white\",\n    height=500\n)\n\nfig.show()"
  },
  {
    "objectID": "sf.html#types-of-crimes-in-specific-neighborhoods",
    "href": "sf.html#types-of-crimes-in-specific-neighborhoods",
    "title": "San Francisco Crime Dashboard",
    "section": "TYPES OF CRIMES IN SPECIFIC NEIGHBORHOODS",
    "text": "TYPES OF CRIMES IN SPECIFIC NEIGHBORHOODS\n\n\nCode\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ntemp = df.dropna(subset=[\"area_name\", \"crime_category\"])\npivot = pd.crosstab(temp[\"area_name\"], temp[\"crime_category\"])\n\ntop_neigh = pivot.sum(axis=1).sort_values(ascending=False).head(10).index\ntop_cat = pivot.sum(axis=0).sort_values(ascending=False).head(10).index\n\npivot = pivot.loc[top_neigh, top_cat]\n\nplt.figure(figsize=(10, 6))\nsns.heatmap(pivot, cmap=\"Reds\")\nplt.title(\"Top Crime Categories Across Top Neighborhoods ‚Äì San Francisco\")\nplt.tight_layout()\nplt.show()"
  },
  {
    "objectID": "sf.html#top-zip-codes-in-san-francisco",
    "href": "sf.html#top-zip-codes-in-san-francisco",
    "title": "San Francisco Crime Dashboard",
    "section": "Top ZIP Codes in San Francisco",
    "text": "Top ZIP Codes in San Francisco\n\n\nCode\n# Clean zip codes\ndf[\"zip_code\"] = df[\"zip_code\"].astype(str).str.replace(\".0\", \"\", regex=False)\n\n# Count crimes per ZIP\nzip_counts = (\n    df.groupby(\"zip_code\")\n      .size()\n      .reset_index(name=\"crime_count\")\n      .sort_values(\"crime_count\", ascending=False)\n)\n\ntop_zip = zip_counts.head(10)\ntop_zip\n\n\n\n\n\n\n\n\n\nzip_code\ncrime_count\n\n\n\n\n0\n94102\n93221\n\n\n1\n94103\n52778\n\n\n7\n94110\n49441\n\n\n5\n94108\n45054\n\n\n24\nUnknown\n38288\n\n\n4\n94107\n36625\n\n\n18\n94124\n31929\n\n\n6\n94109\n30749\n\n\n11\n94115\n28008\n\n\n22\n94133\n27259\n\n\n\n\n\n\n\n\nüîπ Horizontal Bar Chart\n\n\nCode\nimport plotly.express as px\n\nfig = px.bar(\n    top_zip.sort_values(\"crime_count\"),\n    x=\"crime_count\",\n    y=\"zip_code\",\n    orientation=\"h\",\n    title=\"Top 10 ZIP Codes by Total Crime\",\n    labels={\"zip_code\": \"ZIP Code\", \"crime_count\": \"Crime Count\"},\n    template=\"plotly_white\"\n)\n\nfig\n\n\n                            \n                                            \n\n\n\n\nüîπ Treemap View\n\n\nCode\nfig = px.treemap(\n    top_zip,\n    path=[\"zip_code\"],\n    values=\"crime_count\",\n    title=\"Crime Volume by ZIP Code (Treemap)\",\n    template=\"plotly_white\"\n)\n\nfig"
  },
  {
    "objectID": "LinearRegression.html",
    "href": "LinearRegression.html",
    "title": "Multi-City Crime Forecast - LinearRegression",
    "section": "",
    "text": "Code\nimport pandas as pd\nimport numpy as np\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import r2_score\nimport plotly.express as px\n\nSF_forecast = pd.read_csv(\"data/San Francisco_forecast.csv\")\nLA_forecast = pd.read_csv(\"data/Los Angeles_forecast.csv\")\nSD_forecast = pd.read_csv(\"data/San Diego_forecast.csv\")\n\ncombined = pd.concat([SF_forecast, LA_forecast, SD_forecast])\ncombined[\"ds\"] = pd.to_datetime(combined[\"ds\"])\n\nfig = px.line(\n    combined,\n    x=\"ds\",\n    y=\"yhat\",\n    color=\"city\",\n    markers=True,\n    title=\"Crime Forecast Comparison Across Cities (Next 12 Months)\"\n)\n\nfig.update_layout(\n    xaxis_title=\"Month\",\n    yaxis_title=\"Predicted Crime Count\",\n    legend_title=\"City\"\n)\n\n\n        \n        \n        \n\n\n                            \n                                            \n\n\n\n\nCode\ncities = {\n    \"San Francisco\": \"data/SF_monthly.csv\",\n    \"Los Angeles\": \"data/LA_monthly.csv\",\n    \"San Diego\": \"data/SD_monthly.csv\"\n}\n\nresults = []\n\nfor city, path in cities.items():\n    df = pd.read_csv(path)\n    df[\"ds\"] = pd.to_datetime(df[\"ds\"])\n    y = df[\"y\"].values\n    X = np.arange(len(y)).reshape(-1, 1)\n    model = LinearRegression()\n    model.fit(X, y)\n    y_pred = model.predict(X)\n    r2 = r2_score(y, y_pred)\n    results.append([city, r2])\n\nr2_df = pd.DataFrame(results, columns=[\"City\", \"R_squared\"])\nr2_df\n\nr2_df.style.format({\"R_squared\": \"{:.3f}\"})\n\n\n\n\n\n\n\n¬†\nCity\nR_squared\n\n\n\n\n0\nSan Francisco\n0.207\n\n\n1\nLos Angeles\n0.335\n\n\n2\nSan Diego\n0.675\n\n\n\n\n\n\n\nCode\nimport pandas as pd\nimport numpy as np\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import r2_score\nimport plotly.express as px\n\ncities = {\n    \"San Francisco\": \"data/SF_monthly.csv\",\n    \"Los Angeles\": \"data/LA_monthly.csv\",\n    \"San Diego\": \"data/SD_monthly.csv\"\n}\n\nresults = []\n\nfor city, path in cities.items():\n    df = pd.read_csv(path)\n    df[\"ds\"] = pd.to_datetime(df[\"ds\"])\n    y = df[\"y\"].values\n    X = np.arange(len(y)).reshape(-1, 1)\n    model = LinearRegression()\n    model.fit(X, y)\n    y_pred = model.predict(X)\n    r2 = r2_score(y, y_pred)\n    results.append([city, r2])\n\nr2_df = pd.DataFrame(results, columns=[\"City\", \"R_squared\"])\n\nfig = px.bar(\n    r2_df,\n    x=\"City\",\n    y=\"R_squared\",\n    title=\"R¬≤ Comparison Across Cities\",\n    text=\"R_squared\",\n    color=\"City\"\n)\n\nfig.update_layout(yaxis_title=\"R¬≤ Value\")\nfig"
  },
  {
    "objectID": "sd.html",
    "href": "sd.html",
    "title": "San Diego Crime Dashboard",
    "section": "",
    "text": "Code\nimport folium\nfrom folium.plugins import MarkerCluster\nimport pandas as pd\n\n# load dat with lat/lon\ndf_sd = pd.read_csv(\"data/san_diego_with_latlon.csv\")\n\n# build map\nsd_map = folium.Map(location=[32.7157, -117.1611], zoom_start=11)\nmarker_cluster = MarkerCluster().add_to(sd_map)\n\n# sample\ndf_sample = df_sd.sample(n=5000, random_state=42)\n\n# mark\nfor _, row in df_sample.iterrows():\n    folium.CircleMarker(\n        location=[row[\"latitude\"], row[\"longitude\"]],\n        radius=3,\n        color=\"blue\",\n        fill=True,\n        fill_opacity=0.6\n    ).add_to(marker_cluster)\n\nsd_map\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook\nCode\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\n\n# Load data\ndf = pd.read_csv(\"data/san_diego_with_latlon.csv\")\n\n# Convert incident_date to datetime\ndf[\"incident_date\"] = pd.to_datetime(df[\"incident_date\"], errors=\"coerce\")\n\n# Extract year/month/month_name clearly\ndf[\"year\"] = df[\"incident_date\"].dt.year\ndf[\"month\"] = df[\"incident_date\"].dt.month\ndf[\"month_name\"] = df[\"incident_date\"].dt.strftime(\"%b\")\n\n# clean zip codes\ndf[\"zip_code\"] = df[\"zip_code\"].astype(str).str.replace(\".0\", \"\", regex=False)\n\n# Remove missing dates\ndf = df.dropna(subset=[\"year\", \"month\"])\n\n# Monthly crime totals\nmonthly_total = (\n    df.groupby([\"year\", \"month\", \"month_name\"])\n      .size()\n      .reset_index(name=\"crime_count\")\n)\n\n# Crime Trends Over Time\n\nimport plotly.express as px\n\nyears = sorted(df[\"year\"].unique())\n\nfig = px.line(\n    monthly_total,\n    x=\"month_name\",\n    y=\"crime_count\",\n    color=\"year\",\n    markers=True,\n    title=\"Monthly Crime Totals (Select Year)\",\n    template=\"plotly_white\"\n)\n\n# Dropdown Buttons\nbuttons = []\n\n# Show all years\nbuttons.append(\n    dict(\n        label=\"All Years\",\n        method=\"update\",\n        args=[{\"visible\": [True] * len(years)}]\n    )\n)\n\n# Individual years\nfor i, yr in enumerate(years):\n    visibility = [False] * len(years)\n    visibility[i] = True\n\n    buttons.append(\n        dict(\n            label=str(yr),\n            method=\"update\",\n            args=[{\"visible\": visibility}]\n        )\n    )\n\nfig.update_layout(\n    updatemenus=[\n        dict(buttons=buttons, direction=\"down\", x=1.15, y=1.0)\n    ]\n)\n\nfig.update_xaxes(\n    categoryorder=\"array\",\n    categoryarray=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]\n)\n\nfig"
  },
  {
    "objectID": "sd.html#top-zip-codes",
    "href": "sd.html#top-zip-codes",
    "title": "San Diego Crime Dashboard",
    "section": "Top ZIP Codes",
    "text": "Top ZIP Codes\n\n\nCode\n# --- ZIP must be treated as string ---\ndf[\"zip_code\"] = df[\"zip_code\"].astype(str)\n\nzip_counts = (\n    df.groupby(\"zip_code\")\n      .size()\n      .reset_index(name=\"crime_count\")\n      .sort_values(\"crime_count\", ascending=False)\n)\n\ntop_zip = zip_counts.head(10)\n\nfig = px.bar(\n    top_zip.sort_values(\"crime_count\"),\n    x=\"crime_count\",\n    y=\"zip_code\",\n    orientation=\"h\",\n    title=\"Top 10 ZIP Codes by Total Crime\",\n    template=\"plotly_white\",\n)\n\nfig.update_layout(\n    yaxis=dict(type=\"category\"),   # Force categorical y-axis\n)\n\nfig"
  },
  {
    "objectID": "sd.html#zip-code-treemap",
    "href": "sd.html#zip-code-treemap",
    "title": "San Diego Crime Dashboard",
    "section": "ZIP Code Treemap",
    "text": "ZIP Code Treemap\n\n\nCode\nfig = px.treemap(\n    top_zip,\n    path=[\"zip_code\"],\n    values=\"crime_count\",\n    title=\"Top ZIP Codes by Crime Volume\"\n)\n\nfig"
  },
  {
    "objectID": "forecast_all.html",
    "href": "forecast_all.html",
    "title": "Crime Forecasts with Prophet",
    "section": "",
    "text": "This page presents crime forecasting results for Los Angeles, San Diego, and San Francisco using the Prophet time-series model. Forecasts are generated from pre-computed Prophet output (CSV files), allowing us to visualize trends without retraining the model.\nThe charts include:\n\n30-day forecast comparison across the three cities\nActual vs.¬†predicted crime counts\nForecast confidence intervals\nSeasonal components (yearly, weekly, daily)\n\nThese visualizations provide a quick overview of how crime patterns evolve over time and how Prophet captures long-term trends and seasonality.\n\n\nCode\n# ============================================================\n# Build correct DAILY crime counts for LA, SD, SF\n# ============================================================\n\nimport pandas as pd\n\n# ===== 1. Load raw CSVs =====\ndf_la_raw = pd.read_csv(\"data/los_angeles.csv\")\ndf_sd_raw = pd.read_csv(\"data/san_diego.csv\")\ndf_sf_raw = pd.read_csv(\"data/san_francisco.csv\", low_memory=False)\n\n# ===== 2. Convert to datetime =====\ndf_la_raw[\"incident_date\"] = pd.to_datetime(df_la_raw[\"incident_date\"], errors=\"coerce\")\ndf_sd_raw[\"incident_date\"] = pd.to_datetime(df_sd_raw[\"incident_date\"], errors=\"coerce\")\ndf_sf_raw[\"incident_date\"] = pd.to_datetime(df_sf_raw[\"incident_date\"], errors=\"coerce\")\n\n# ===== 3. Drop invalid dates =====\ndf_la_raw = df_la_raw.dropna(subset=[\"incident_date\"])\ndf_sd_raw = df_sd_raw.dropna(subset=[\"incident_date\"])\ndf_sf_raw = df_sf_raw.dropna(subset=[\"incident_date\"])\n\n# ===== 4. Extract PURE DATE (remove hours/min/sec) =====\ndf_la_raw[\"date\"] = df_la_raw[\"incident_date\"].dt.date\ndf_sd_raw[\"date\"] = df_sd_raw[\"incident_date\"].dt.date\ndf_sf_raw[\"date\"] = df_sf_raw[\"incident_date\"].dt.date\n\n# ===== 5. Group by daily counts =====\ndaily_la = (\n    df_la_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .rename(columns={\"date\": \"ds\"})\n)\n\ndaily_sd = (\n    df_sd_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .rename(columns={\"date\": \"ds\"})\n)\n\ndaily_sf = (\n    df_sf_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .reset_index()\n    .rename(columns={\"date\": \"ds\"})\n)\n\n# (Fix SF: previous code mis-grouped, correct version below)\ndaily_sf = (\n    df_sf_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .rename(columns={\"date\": \"ds\"})\n)"
  },
  {
    "objectID": "forecast_all.html#introduction",
    "href": "forecast_all.html#introduction",
    "title": "Crime Forecasts with Prophet",
    "section": "",
    "text": "This page presents crime forecasting results for Los Angeles, San Diego, and San Francisco using the Prophet time-series model. Forecasts are generated from pre-computed Prophet output (CSV files), allowing us to visualize trends without retraining the model.\nThe charts include:\n\n30-day forecast comparison across the three cities\nActual vs.¬†predicted crime counts\nForecast confidence intervals\nSeasonal components (yearly, weekly, daily)\n\nThese visualizations provide a quick overview of how crime patterns evolve over time and how Prophet captures long-term trends and seasonality.\n\n\nCode\n# ============================================================\n# Build correct DAILY crime counts for LA, SD, SF\n# ============================================================\n\nimport pandas as pd\n\n# ===== 1. Load raw CSVs =====\ndf_la_raw = pd.read_csv(\"data/los_angeles.csv\")\ndf_sd_raw = pd.read_csv(\"data/san_diego.csv\")\ndf_sf_raw = pd.read_csv(\"data/san_francisco.csv\", low_memory=False)\n\n# ===== 2. Convert to datetime =====\ndf_la_raw[\"incident_date\"] = pd.to_datetime(df_la_raw[\"incident_date\"], errors=\"coerce\")\ndf_sd_raw[\"incident_date\"] = pd.to_datetime(df_sd_raw[\"incident_date\"], errors=\"coerce\")\ndf_sf_raw[\"incident_date\"] = pd.to_datetime(df_sf_raw[\"incident_date\"], errors=\"coerce\")\n\n# ===== 3. Drop invalid dates =====\ndf_la_raw = df_la_raw.dropna(subset=[\"incident_date\"])\ndf_sd_raw = df_sd_raw.dropna(subset=[\"incident_date\"])\ndf_sf_raw = df_sf_raw.dropna(subset=[\"incident_date\"])\n\n# ===== 4. Extract PURE DATE (remove hours/min/sec) =====\ndf_la_raw[\"date\"] = df_la_raw[\"incident_date\"].dt.date\ndf_sd_raw[\"date\"] = df_sd_raw[\"incident_date\"].dt.date\ndf_sf_raw[\"date\"] = df_sf_raw[\"incident_date\"].dt.date\n\n# ===== 5. Group by daily counts =====\ndaily_la = (\n    df_la_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .rename(columns={\"date\": \"ds\"})\n)\n\ndaily_sd = (\n    df_sd_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .rename(columns={\"date\": \"ds\"})\n)\n\ndaily_sf = (\n    df_sf_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .reset_index()\n    .rename(columns={\"date\": \"ds\"})\n)\n\n# (Fix SF: previous code mis-grouped, correct version below)\ndaily_sf = (\n    df_sf_raw.groupby(\"date\")\n    .size()\n    .reset_index(name=\"y\")\n    .rename(columns={\"date\": \"ds\"})\n)"
  },
  {
    "objectID": "forecast_all.html#forecast-los-angeles-crime-prophet",
    "href": "forecast_all.html#forecast-los-angeles-crime-prophet",
    "title": "Crime Forecasts with Prophet",
    "section": "Forecast ‚Äî Los Angeles Crime (Prophet)",
    "text": "Forecast ‚Äî Los Angeles Crime (Prophet)\n\n\nCode\n# ============================================================\n# Forecast ‚Äî Los Angeles Crime (Prophet)\n# ============================================================\n\nfrom prophet import Prophet\n\n# Prophet requires ds as datetime, convert if needed\ndaily_la[\"ds\"] = pd.to_datetime(daily_la[\"ds\"])\n\nm_la = Prophet(\n    daily_seasonality=True,\n    weekly_seasonality=True,\n    yearly_seasonality=True,\n    interval_width=0.9,\n)\n\nm_la.fit(daily_la)\n\nfuture_la = m_la.make_future_dataframe(periods=30)\nforecast_la = m_la.predict(future_la)\n\nforecast_la[[\"ds\", \"yhat\", \"yhat_lower\", \"yhat_upper\"]].tail()\n\n\n16:07:16 - cmdstanpy - INFO - Chain [1] start processing\n16:07:16 - cmdstanpy - INFO - Chain [1] done processing\n\n\n\n\n\n\n\n\n\nds\nyhat\nyhat_lower\nyhat_upper\n\n\n\n\n1904\n2025-06-24\n-171.178043\n-290.385998\n-53.506957\n\n\n1905\n2025-06-25\n-158.073769\n-280.798630\n-41.070775\n\n\n1906\n2025-06-26\n-161.695290\n-286.405748\n-43.864730\n\n\n1907\n2025-06-27\n-119.476412\n-236.855705\n4.296271\n\n\n1908\n2025-06-28\n-141.978940\n-268.461451\n-19.821021"
  },
  {
    "objectID": "forecast_all.html#forecast-san-francisco-crime-prophet",
    "href": "forecast_all.html#forecast-san-francisco-crime-prophet",
    "title": "Crime Forecasts with Prophet",
    "section": "Forecast ‚Äî San Francisco Crime (Prophet)",
    "text": "Forecast ‚Äî San Francisco Crime (Prophet)\n\n\nCode\n# ============================================================\n# Forecast ‚Äî San Francisco Crime (Prophet)\n# ============================================================\n\nfrom prophet import Prophet\n\n# Ensure datetime format\ndaily_sf[\"ds\"] = pd.to_datetime(daily_sf[\"ds\"])\n\nm_sf = Prophet(\n    daily_seasonality=True,\n    weekly_seasonality=True,\n    yearly_seasonality=True,\n    interval_width=0.9,\n)\n\nm_sf.fit(daily_sf)\n\nfuture_sf = m_sf.make_future_dataframe(periods=30)\nforecast_sf = m_sf.predict(future_sf)\n\nforecast_sf[[\"ds\", \"yhat\", \"yhat_lower\", \"yhat_upper\"]].tail()\n\n\n16:08:03 - cmdstanpy - INFO - Chain [1] start processing\n16:08:04 - cmdstanpy - INFO - Chain [1] done processing\n\n\n\n\n\n\n\n\n\nds\nyhat\nyhat_lower\nyhat_upper\n\n\n\n\n2174\n2025-12-14\n185.450937\n122.147622\n247.501477\n\n\n2175\n2025-12-15\n206.020712\n145.693384\n269.989910\n\n\n2176\n2025-12-16\n208.902863\n148.870077\n268.741471\n\n\n2177\n2025-12-17\n226.950089\n163.778228\n290.599244\n\n\n2178\n2025-12-18\n213.829829\n145.745018\n275.530323"
  },
  {
    "objectID": "forecast_all.html#forecast-san-diego-crime-prophet-normal-mode",
    "href": "forecast_all.html#forecast-san-diego-crime-prophet-normal-mode",
    "title": "Crime Forecasts with Prophet",
    "section": "Forecast ‚Äî San Diego Crime (Prophet, Normal Mode)",
    "text": "Forecast ‚Äî San Diego Crime (Prophet, Normal Mode)\n\n\nCode\n# ============================================================\n# Forecast ‚Äî San Diego Crime (Prophet, Normal Mode)\n# ============================================================\n\nfrom prophet import Prophet\n\n# Ensure datetime format\ndaily_sd[\"ds\"] = pd.to_datetime(daily_sd[\"ds\"])\n\nm_sd = Prophet(\n    daily_seasonality=True,\n    weekly_seasonality=True,\n    yearly_seasonality=True,\n    interval_width=0.9,\n)\n\nm_sd.fit(daily_sd)\n\nfuture_sd = m_sd.make_future_dataframe(periods=30)\nforecast_sd = m_sd.predict(future_sd)\n\nforecast_sd[[\"ds\", \"yhat\", \"yhat_lower\", \"yhat_upper\"]].tail()\n\n\n16:08:23 - cmdstanpy - INFO - Chain [1] start processing\n16:08:23 - cmdstanpy - INFO - Chain [1] done processing\n\n\n\n\n\n\n\n\n\nds\nyhat\nyhat_lower\nyhat_upper\n\n\n\n\n1809\n2025-12-15\n243.013641\n184.147838\n303.632784\n\n\n1810\n2025-12-16\n237.511433\n175.041508\n296.710928\n\n\n1811\n2025-12-17\n246.504209\n190.669433\n306.445333\n\n\n1812\n2025-12-18\n248.197095\n188.653083\n312.900915\n\n\n1813\n2025-12-19\n273.766830\n215.126359\n334.085607"
  },
  {
    "objectID": "forecast_all.html#save-forecast-results-as-csv-for-all-3-cities",
    "href": "forecast_all.html#save-forecast-results-as-csv-for-all-3-cities",
    "title": "Crime Forecasts with Prophet",
    "section": "Save Forecast Results as CSV for All 3 Cities",
    "text": "Save Forecast Results as CSV for All 3 Cities\n\n\nCode\n# ============================================================\n# Save Forecast Results as CSV for All 3 Cities\n# ============================================================\n\n# Only keep the useful columns\ncols = [\"ds\", \"yhat\", \"yhat_lower\", \"yhat_upper\"]\n\n# LA\nforecast_la_out = forecast_la[cols]\nforecast_la_out.to_csv(\"data/los_angeles_forecast.csv\", index=False)\n\n# SD\nforecast_sd_out = forecast_sd[cols]\nforecast_sd_out.to_csv(\"data/san_diego_forecast.csv\", index=False)\n\n# SF\nforecast_sf_out = forecast_sf[cols]\nforecast_sf_out.to_csv(\"data/san_francisco_forecast.csv\", index=False)\n\n\nforecast_la_out.tail()\n\n\n\n\n\n\n\n\n\nds\nyhat\nyhat_lower\nyhat_upper\n\n\n\n\n1904\n2025-06-24\n-171.178043\n-290.385998\n-53.506957\n\n\n1905\n2025-06-25\n-158.073769\n-280.798630\n-41.070775\n\n\n1906\n2025-06-26\n-161.695290\n-286.405748\n-43.864730\n\n\n1907\n2025-06-27\n-119.476412\n-236.855705\n4.296271\n\n\n1908\n2025-06-28\n-141.978940\n-268.461451\n-19.821021"
  },
  {
    "objectID": "forecast_all.html#los-angeles",
    "href": "forecast_all.html#los-angeles",
    "title": "Crime Forecasts with Prophet",
    "section": "Los Angeles",
    "text": "Los Angeles\n\n\nCode\n# LA\nplot_prophet_components(m_la, \"Los Angeles\")"
  },
  {
    "objectID": "forecast_all.html#san-diego",
    "href": "forecast_all.html#san-diego",
    "title": "Crime Forecasts with Prophet",
    "section": "San Diego",
    "text": "San Diego\n\n\nCode\n# SD\nplot_prophet_components(m_sd, \"San Diego\")"
  },
  {
    "objectID": "forecast_all.html#san-francisco",
    "href": "forecast_all.html#san-francisco",
    "title": "Crime Forecasts with Prophet",
    "section": "San Francisco",
    "text": "San Francisco\n\n\nCode\n# SF\nplot_prophet_components(m_sf, \"San Francisco\")"
  },
  {
    "objectID": "la_forecast.html",
    "href": "la_forecast.html",
    "title": "LA Crime Forecast",
    "section": "",
    "text": "This page presents a simple time-series forecast of daily crime counts in Los Angeles, based on the city‚Äôs historical crime incident data.\nCode\nimport pandas as pd\n\n# load LA data\ndf = pd.read_csv(\"data/los_angeles.csv\")\n\ndf[\"incident_date\"] = pd.to_datetime(df[\"incident_date\"], errors=\"coerce\")\n\n# only keep date\ndf = df.dropna(subset=[\"incident_date\"])\n\n# daily crime count\ndaily = df.groupby(\"incident_date\").size().reset_index(name=\"crime_count\")\n\nprint(daily.head())\nprint(daily.tail())\n\n\n  incident_date  crime_count\n0    2020-01-01         1164\n1    2020-01-02          528\n2    2020-01-03          596\n3    2020-01-04          541\n4    2020-01-05          506\n     incident_date  crime_count\n1874    2025-03-25            2\n1875    2025-03-26            1\n1876    2025-04-29            1\n1877    2025-05-25            1\n1878    2025-05-29            1\nCode\ndaily_prophet = daily.rename(columns={\"incident_date\": \"ds\", \"crime_count\": \"y\"})\n\nprint(daily_prophet.head())\n\n\n          ds     y\n0 2020-01-01  1164\n1 2020-01-02   528\n2 2020-01-03   596\n3 2020-01-04   541\n4 2020-01-05   506\nCode\nfrom prophet import Prophet\n\n# build model\nm = Prophet()\n\n# train model\nm.fit(daily_prophet)\n\n# predict future crime\nfuture = m.make_future_dataframe(periods=30)  # 30 can change to 60„ÄÅ90\n\n# prediction\nforecast = m.predict(future)\n\nforecast[[\"ds\", \"yhat\", \"yhat_lower\", \"yhat_upper\"]].tail()\n\n\n20:45:23 - cmdstanpy - INFO - Chain [1] start processing\n20:45:23 - cmdstanpy - INFO - Chain [1] done processing\n\n\n\n\n\n\n\n\n\nds\nyhat\nyhat_lower\nyhat_upper\n\n\n\n\n1904\n2025-06-24\n-172.321522\n-265.789475\n-78.812591\n\n\n1905\n2025-06-25\n-159.221329\n-247.370573\n-66.765010\n\n\n1906\n2025-06-26\n-162.854762\n-251.734428\n-72.197464\n\n\n1907\n2025-06-27\n-120.633397\n-217.828916\n-25.846303\n\n\n1908\n2025-06-28\n-143.151121\n-236.293077\n-58.580792"
  },
  {
    "objectID": "la_forecast.html#los-angeles-crime-trend-and-seasonal-patterns-prophet-decomposition",
    "href": "la_forecast.html#los-angeles-crime-trend-and-seasonal-patterns-prophet-decomposition",
    "title": "LA Crime Forecast",
    "section": "Los Angeles Crime Trend and Seasonal Patterns (Prophet Decomposition)",
    "text": "Los Angeles Crime Trend and Seasonal Patterns (Prophet Decomposition)\n\n\nCode\nfig2 = m.plot_components(forecast)\nplt.show()"
  }
]